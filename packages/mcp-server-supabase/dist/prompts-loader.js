// src/prompts/auth-nextjs.md
var auth_nextjs_default = "# Bootstrap Next.js app with Supabase Auth\n\n## \u{1F3AF} \u76EE\u6807\n\u5728 Next.js \u5E94\u7528\u4E2D\u5FEB\u901F\u8BBE\u7F6E Supabase \u8BA4\u8BC1\u7CFB\u7EDF\u3002\n\n## \u{1F6E0}\uFE0F \u6240\u9700\u5DE5\u5177\n- Next.js \u9879\u76EE\n- Supabase \u9879\u76EE\n- Supabase JavaScript \u5BA2\u6237\u7AEF\n\n## \u{1F680} \u5B9E\u73B0\u6B65\u9AA4\n\n### 1. \u5B89\u88C5\u4F9D\u8D56\n```bash\nnpm install @supabase/supabase-js @supabase/auth-helpers-nextjs\n```\n\n### 2. \u73AF\u5883\u53D8\u91CF\u914D\u7F6E\n```env\nNEXT_PUBLIC_SUPABASE_URL=your_supabase_url\nNEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key\n```\n\n### 3. \u521B\u5EFA Supabase \u5BA2\u6237\u7AEF\n```typescript\n// lib/supabase.ts\nimport { createClient } from '@supabase/supabase-js'\n\nexport const supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n)\n```\n\n### 4. \u8BA4\u8BC1\u7EC4\u4EF6\u793A\u4F8B\n```typescript\n// components/Auth.tsx\nimport { useState } from 'react'\nimport { supabase } from '../lib/supabase'\n\nexport default function Auth() {\n  const [loading, setLoading] = useState(false)\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n\n  const handleSignUp = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    \n    const { error } = await supabase.auth.signUp({\n      email,\n      password,\n    })\n    \n    if (error) console.log('Error:', error.message)\n    else alert('Check your email for the confirmation link!')\n    setLoading(false)\n  }\n\n  const handleSignIn = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    \n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    })\n    \n    if (error) console.log('Error:', error.message)\n    setLoading(false)\n  }\n\n  return (\n    <div className=\"auth-container\">\n      <form onSubmit={handleSignUp}>\n        <input\n          type=\"email\"\n          placeholder=\"Your email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Your password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button type=\"submit\" disabled={loading}>\n          {loading ? 'Loading...' : 'Sign Up'}\n        </button>\n      </form>\n      \n      <form onSubmit={handleSignIn}>\n        <button type=\"submit\" disabled={loading}>\n          {loading ? 'Loading...' : 'Sign In'}\n        </button>\n      </form>\n    </div>\n  )\n}\n```\n\n## \u{1F512} \u5B89\u5168\u6700\u4F73\u5B9E\u8DF5\n- \u4F7F\u7528\u73AF\u5883\u53D8\u91CF\u5B58\u50A8\u654F\u611F\u4FE1\u606F\n- \u5B9E\u73B0\u9002\u5F53\u7684\u9519\u8BEF\u5904\u7406\n- \u6DFB\u52A0\u52A0\u8F7D\u72B6\u6001\u548C\u7528\u6237\u53CD\u9988\n- \u8003\u8651\u5B9E\u73B0\u5BC6\u7801\u5F3A\u5EA6\u9A8C\u8BC1\n\n## \u{1F4DA} \u76F8\u5173\u8D44\u6E90\n- [Supabase Auth Documentation](https://supabase.com/docs/guides/auth)\n- [Next.js Documentation](https://nextjs.org/docs)\n\n\n";

// src/prompts/database-functions.md
var database_functions_default = "# Database: Create functions\n\n## \u{1F3AF} \u76EE\u6807\n\u521B\u5EFA\u9AD8\u6548\u3001\u53EF\u7EF4\u62A4\u7684\u6570\u636E\u5E93\u51FD\u6570\uFF0C\u63D0\u5347\u5E94\u7528\u6027\u80FD\u548C\u6570\u636E\u4E00\u81F4\u6027\u3002\n\n## \u{1F3D7}\uFE0F \u51FD\u6570\u7C7B\u578B\n\n### 1. \u6807\u91CF\u51FD\u6570\n```sql\n-- \u8BA1\u7B97\u7528\u6237\u5E74\u9F84\nCREATE OR REPLACE FUNCTION calculate_age(birth_date DATE)\nRETURNS INTEGER AS $$\nBEGIN\n  RETURN EXTRACT(YEAR FROM AGE(birth_date));\nEND;\n$$ LANGUAGE plpgsql IMMUTABLE;\n\n-- \u683C\u5F0F\u5316\u91D1\u989D\nCREATE OR REPLACE FUNCTION format_currency(amount DECIMAL, currency_code VARCHAR(3))\nRETURNS VARCHAR AS $$\nBEGIN\n  RETURN currency_code || ' ' || TO_CHAR(amount, 'FM999,999,999.00');\nEND;\n$$ LANGUAGE plpgsql IMMUTABLE;\n```\n\n### 2. \u8868\u51FD\u6570\n```sql\n-- \u83B7\u53D6\u7528\u6237\u8BA2\u5355\u7EDF\u8BA1\nCREATE OR REPLACE FUNCTION get_user_order_stats(user_uuid UUID)\nRETURNS TABLE (\n  total_orders BIGINT,\n  total_spent DECIMAL(10,2),\n  avg_order_value DECIMAL(10,2),\n  last_order_date TIMESTAMP WITH TIME ZONE\n) AS $$\nBEGIN\n  RETURN QUERY\n  SELECT \n    COUNT(o.id)::BIGINT,\n    COALESCE(SUM(o.total_amount), 0),\n    COALESCE(AVG(o.total_amount), 0),\n    MAX(o.created_at)\n  FROM orders o\n  WHERE o.user_id = user_uuid;\nEND;\n$$ LANGUAGE plpgsql STABLE;\n```\n\n### 3. \u89E6\u53D1\u5668\u51FD\u6570\n```sql\n-- \u81EA\u52A8\u66F4\u65B0\u65F6\u95F4\u6233\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n  NEW.updated_at = NOW();\n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- \u521B\u5EFA\u89E6\u53D1\u5668\nCREATE TRIGGER update_users_updated_at\n  BEFORE UPDATE ON users\n  FOR EACH ROW\n  EXECUTE FUNCTION update_updated_at_column();\n```\n\n## \u{1F512} \u5B89\u5168\u51FD\u6570\n\n### 1. \u6570\u636E\u9A8C\u8BC1\u51FD\u6570\n```sql\n-- \u9A8C\u8BC1\u90AE\u7BB1\u683C\u5F0F\nCREATE OR REPLACE FUNCTION is_valid_email(email TEXT)\nRETURNS BOOLEAN AS $$\nBEGIN\n  RETURN email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$';\nEND;\n$$ LANGUAGE plpgsql IMMUTABLE;\n\n-- \u9A8C\u8BC1\u5BC6\u7801\u5F3A\u5EA6\nCREATE OR REPLACE FUNCTION is_strong_password(password TEXT)\nRETURNS BOOLEAN AS $$\nBEGIN\n  RETURN \n    LENGTH(password) >= 8 AND\n    password ~ '[A-Z]' AND\n    password ~ '[a-z]' AND\n    password ~ '[0-9]' AND\n    password ~ '[^A-Za-z0-9]';\nEND;\n$$ LANGUAGE plpgsql IMMUTABLE;\n```\n\n### 2. \u6743\u9650\u68C0\u67E5\u51FD\u6570\n```sql\n-- \u68C0\u67E5\u7528\u6237\u6743\u9650\nCREATE OR REPLACE FUNCTION check_user_permission(\n  user_uuid UUID,\n  required_permission TEXT\n)\nRETURNS BOOLEAN AS $$\nDECLARE\n  has_permission BOOLEAN;\nBEGIN\n  SELECT EXISTS(\n    SELECT 1 FROM user_permissions up\n    JOIN permissions p ON up.permission_id = p.id\n    WHERE up.user_id = user_uuid\n    AND p.name = required_permission\n    AND up.is_active = true\n  ) INTO has_permission;\n  \n  RETURN has_permission;\nEND;\n$$ LANGUAGE plpgsql STABLE;\n```\n\n## \u{1F504} \u4E8B\u52A1\u51FD\u6570\n\n### 1. \u590D\u6742\u4E1A\u52A1\u903B\u8F91\n```sql\n-- \u5904\u7406\u8BA2\u5355\u652F\u4ED8\nCREATE OR REPLACE FUNCTION process_order_payment(\n  order_uuid UUID,\n  payment_amount DECIMAL(10,2),\n  payment_method TEXT\n)\nRETURNS BOOLEAN AS $$\nDECLARE\n  order_record RECORD;\n  user_record RECORD;\nBEGIN\n  -- \u5F00\u59CB\u4E8B\u52A1\n  BEGIN\n    -- \u83B7\u53D6\u8BA2\u5355\u4FE1\u606F\n    SELECT * INTO order_record FROM orders WHERE id = order_uuid;\n    IF NOT FOUND THEN\n      RAISE EXCEPTION 'Order not found';\n    END IF;\n    \n    -- \u83B7\u53D6\u7528\u6237\u4FE1\u606F\n    SELECT * INTO user_record FROM users WHERE id = order_record.user_id;\n    \n    -- \u9A8C\u8BC1\u652F\u4ED8\u91D1\u989D\n    IF payment_amount != order_record.total_amount THEN\n      RAISE EXCEPTION 'Payment amount mismatch';\n    END IF;\n    \n    -- \u66F4\u65B0\u8BA2\u5355\u72B6\u6001\n    UPDATE orders \n    SET \n      status = 'paid',\n      payment_method = payment_method,\n      paid_at = NOW(),\n      updated_at = NOW()\n    WHERE id = order_uuid;\n    \n    -- \u8BB0\u5F55\u652F\u4ED8\u5386\u53F2\n    INSERT INTO payment_history (\n      order_id, amount, method, processed_at\n    ) VALUES (\n      order_uuid, payment_amount, payment_method, NOW()\n    );\n    \n    -- \u63D0\u4EA4\u4E8B\u52A1\n    RETURN true;\n    \n  EXCEPTION\n    WHEN OTHERS THEN\n      -- \u56DE\u6EDA\u4E8B\u52A1\n      RAISE;\n  END;\nEND;\n$$ LANGUAGE plpgsql;\n```\n\n## \u26A1 \u6027\u80FD\u4F18\u5316\n\n### 1. \u51FD\u6570\u5C5E\u6027\n```sql\n-- \u4E0D\u53EF\u53D8\u51FD\u6570\uFF08\u76F8\u540C\u8F93\u5165\u603B\u662F\u8FD4\u56DE\u76F8\u540C\u8F93\u51FA\uFF09\nCREATE OR REPLACE FUNCTION get_user_by_id(user_id UUID)\nRETURNS users AS $$\n  SELECT * FROM users WHERE id = user_id;\n$$ LANGUAGE sql IMMUTABLE;\n\n-- \u7A33\u5B9A\u51FD\u6570\uFF08\u76F8\u540C\u8F93\u5165\u5728\u4E8B\u52A1\u5185\u8FD4\u56DE\u76F8\u540C\u8F93\u51FA\uFF09\nCREATE OR REPLACE FUNCTION get_user_profile(user_id UUID)\nRETURNS user_profiles AS $$\n  SELECT * FROM user_profiles WHERE user_id = $1;\n$$ LANGUAGE sql STABLE;\n\n-- \u6613\u53D8\u51FD\u6570\uFF08\u53EF\u80FD\u8FD4\u56DE\u4E0D\u540C\u7ED3\u679C\uFF09\nCREATE OR REPLACE FUNCTION get_current_timestamp()\nRETURNS TIMESTAMP WITH TIME ZONE AS $$\n  SELECT NOW();\n$$ LANGUAGE sql VOLATILE;\n```\n\n### 2. \u5E76\u884C\u6267\u884C\n```sql\n-- \u652F\u6301\u5E76\u884C\u6267\u884C\u7684\u51FD\u6570\nCREATE OR REPLACE FUNCTION parallel_process_data(data_array INTEGER[])\nRETURNS INTEGER AS $$\nBEGIN\n  RETURN array_length(data_array, 1);\nEND;\n$$ LANGUAGE plpgsql PARALLEL SAFE;\n```\n\n## \u{1F9EA} \u6D4B\u8BD5\u51FD\u6570\n\n### 1. \u5355\u5143\u6D4B\u8BD5\n```sql\n-- \u6D4B\u8BD5\u51FD\u6570\nCREATE OR REPLACE FUNCTION test_calculate_age()\nRETURNS BOOLEAN AS $$\nDECLARE\n  test_result INTEGER;\nBEGIN\n  -- \u6D4B\u8BD5\u7528\u4F8B 1\n  test_result := calculate_age('1990-01-01'::DATE);\n  IF test_result != 34 THEN\n    RAISE EXCEPTION 'Test failed: expected 34, got %', test_result;\n  END IF;\n  \n  -- \u6D4B\u8BD5\u7528\u4F8B 2\n  test_result := calculate_age('2000-01-01'::DATE);\n  IF test_result != 24 THEN\n    RAISE EXCEPTION 'Test failed: expected 24, got %', test_result;\n  END IF;\n  \n  RETURN true;\nEND;\n$$ LANGUAGE plpgsql;\n```\n\n## \u{1F4DA} \u76F8\u5173\u8D44\u6E90\n- [PostgreSQL Functions Documentation](https://www.postgresql.org/docs/current/xfunc.html)\n- [Supabase Database Functions](https://supabase.com/docs/guides/database/functions)\n\n\n";

// src/prompts/database-schema.md
var database_schema_default = "# Database: Declarative Database Schema\n\n## \u{1F3AF} \u76EE\u6807\n\u4F7F\u7528\u58F0\u660E\u5F0F\u65B9\u6CD5\u8BBE\u8BA1\u6E05\u6670\u3001\u53EF\u7EF4\u62A4\u7684\u6570\u636E\u5E93\u6A21\u5F0F\u3002\n\n## \u{1F3D7}\uFE0F \u6A21\u5F0F\u8BBE\u8BA1\u539F\u5219\n\n### 1. \u547D\u540D\u7EA6\u5B9A\n- \u8868\u540D\u4F7F\u7528\u590D\u6570\u5F62\u5F0F\uFF1A`users`, `orders`, `products`\n- \u5B57\u6BB5\u540D\u4F7F\u7528\u5C0F\u5199\u548C\u4E0B\u5212\u7EBF\uFF1A`user_id`, `created_at`, `is_active`\n- \u7EA6\u675F\u540D\u4F7F\u7528\u63CF\u8FF0\u6027\u540D\u79F0\uFF1A`fk_user_orders`, `idx_users_email`\n\n### 2. \u6570\u636E\u7C7B\u578B\u9009\u62E9\n```sql\n-- \u7528\u6237\u8868\u793A\u4F8B\nCREATE TABLE users (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  email VARCHAR(255) UNIQUE NOT NULL,\n  username VARCHAR(50) UNIQUE NOT NULL,\n  full_name VARCHAR(100),\n  avatar_url TEXT,\n  is_active BOOLEAN DEFAULT true,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- \u8BA2\u5355\u8868\u793A\u4F8B\nCREATE TABLE orders (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n  order_number VARCHAR(20) UNIQUE NOT NULL,\n  total_amount DECIMAL(10,2) NOT NULL CHECK (total_amount > 0),\n  status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'confirmed', 'shipped', 'delivered', 'cancelled')),\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n```\n\n### 3. \u7D22\u5F15\u7B56\u7565\n```sql\n-- \u4E3A\u5E38\u7528\u67E5\u8BE2\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_users_email ON users(email);\nCREATE INDEX idx_users_username ON users(username);\nCREATE INDEX idx_orders_user_id ON orders(user_id);\nCREATE INDEX idx_orders_status ON orders(status);\nCREATE INDEX idx_orders_created_at ON orders(created_at);\n\n-- \u590D\u5408\u7D22\u5F15\nCREATE INDEX idx_orders_user_status ON orders(user_id, status);\n```\n\n### 4. \u7EA6\u675F\u548C\u9A8C\u8BC1\n```sql\n-- \u68C0\u67E5\u7EA6\u675F\nALTER TABLE users ADD CONSTRAINT chk_email_format \n  CHECK (email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$');\n\n-- \u5916\u952E\u7EA6\u675F\nALTER TABLE orders ADD CONSTRAINT fk_orders_user \n  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE;\n\n-- \u552F\u4E00\u7EA6\u675F\nALTER TABLE users ADD CONSTRAINT uk_users_email UNIQUE (email);\n```\n\n## \u{1F504} \u6A21\u5F0F\u6F14\u8FDB\n\n### 1. \u4F7F\u7528\u8FC1\u79FB\u6587\u4EF6\n```sql\n-- migrations/001_create_users_table.sql\nCREATE TABLE users (\n  -- \u8868\u7ED3\u6784\n);\n\n-- migrations/002_add_user_profile.sql\nALTER TABLE users ADD COLUMN profile_data JSONB;\n```\n\n### 2. \u5411\u540E\u517C\u5BB9\u6027\n```sql\n-- \u6DFB\u52A0\u65B0\u5B57\u6BB5\u65F6\u63D0\u4F9B\u9ED8\u8BA4\u503C\nALTER TABLE users ADD COLUMN phone VARCHAR(20) DEFAULT NULL;\n\n-- \u5220\u9664\u5B57\u6BB5\u524D\u5148\u6807\u8BB0\u4E3A\u5E9F\u5F03\nALTER TABLE users ADD COLUMN is_deprecated BOOLEAN DEFAULT false;\n```\n\n## \u26A1 \u6027\u80FD\u4F18\u5316\n\n### 1. \u5206\u533A\u7B56\u7565\n```sql\n-- \u6309\u65F6\u95F4\u5206\u533A\nCREATE TABLE orders (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  -- \u5176\u4ED6\u5B57\u6BB5\n) PARTITION BY RANGE (created_at);\n\n-- \u521B\u5EFA\u5206\u533A\nCREATE TABLE orders_2024 PARTITION OF orders\n  FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');\n```\n\n### 2. \u7269\u5316\u89C6\u56FE\n```sql\n-- \u521B\u5EFA\u7269\u5316\u89C6\u56FE\nCREATE MATERIALIZED VIEW user_order_summary AS\nSELECT \n  u.id,\n  u.email,\n  COUNT(o.id) as order_count,\n  SUM(o.total_amount) as total_spent\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id\nGROUP BY u.id, u.email;\n\n-- \u5B9A\u671F\u5237\u65B0\nREFRESH MATERIALIZED VIEW user_order_summary;\n```\n\n## \u{1F512} \u5B89\u5168\u8003\u8651\n- \u4F7F\u7528 RLS (Row Level Security) \u63A7\u5236\u6570\u636E\u8BBF\u95EE\n- \u5B9E\u73B0\u9002\u5F53\u7684\u6743\u9650\u7BA1\u7406\n- \u5B9A\u671F\u5BA1\u8BA1\u6570\u636E\u5E93\u8BBF\u95EE\n- \u52A0\u5BC6\u654F\u611F\u6570\u636E\n\n## \u{1F4DA} \u76F8\u5173\u8D44\u6E90\n- [PostgreSQL Documentation](https://www.postgresql.org/docs/)\n- [Supabase Database Guide](https://supabase.com/docs/guides/database)\n\n\n";

// src/prompts/edge-functions.md
var edge_functions_default = '# Writing Supabase Edge Functions\n\n## \u{1F3AF} \u76EE\u6807\n\u5F00\u53D1\u9AD8\u6548\u3001\u5B89\u5168\u7684 Supabase Edge Functions\u3002\n\n## \u{1F4DD} \u51FD\u6570\u6A21\u677F\n\n### \u57FA\u7840\u51FD\u6570\u7ED3\u6784\n```typescript\n// supabase/functions/my-function/index.ts\nimport { serve } from "https://deno.land/std@0.168.0/http/server.ts"\n\nserve(async (req) => {\n  try {\n    // \u83B7\u53D6\u8BF7\u6C42\u6570\u636E\n    const { name } = await req.json()\n    \n    // \u4E1A\u52A1\u903B\u8F91\n    const message = `Hello ${name}!`\n    \n    // \u8FD4\u56DE\u54CD\u5E94\n    return new Response(\n      JSON.stringify({ message }),\n      { \n        headers: { "Content-Type": "application/json" },\n        status: 200 \n      }\n    )\n  } catch (error) {\n    return new Response(\n      JSON.stringify({ error: error.message }),\n      { \n        headers: { "Content-Type": "application/json" },\n        status: 400 \n      }\n    )\n  }\n})\n```\n\n### \u6570\u636E\u5E93\u64CD\u4F5C\u51FD\u6570\n```typescript\nimport { serve } from "https://deno.land/std@0.168.0/http/server.ts"\nimport { createClient } from \'https://esm.sh/@supabase/supabase-js@2\'\n\nserve(async (req) => {\n  // \u521B\u5EFA Supabase \u5BA2\u6237\u7AEF\n  const supabaseClient = createClient(\n    Deno.env.get(\'SUPABASE_URL\') ?? \'\',\n    Deno.env.get(\'SUPABASE_ANON_KEY\') ?? \'\'\n  )\n  \n  try {\n    const { data, error } = await supabaseClient\n      .from(\'users\')\n      .select(\'*\')\n      .limit(10)\n    \n    if (error) throw error\n    \n    return new Response(\n      JSON.stringify({ data }),\n      { headers: { "Content-Type": "application/json" } }\n    )\n  } catch (error) {\n    return new Response(\n      JSON.stringify({ error: error.message }),\n      { \n        headers: { "Content-Type": "application/json" },\n        status: 400 \n      }\n    )\n  }\n})\n```\n\n## \u{1F512} \u5B89\u5168\u6700\u4F73\u5B9E\u8DF5\n- \u9A8C\u8BC1 JWT \u4EE4\u724C\n- \u5B9E\u73B0\u9002\u5F53\u7684\u9519\u8BEF\u5904\u7406\n- \u76EE\u524D\u4E0D\u652F\u6301\u4F7F\u7528\u73AF\u5883\u53D8\u91CF\u5B58\u50A8\u654F\u611F\u4FE1\u606F\n\n## \u{1F680} \u90E8\u7F72\u548C\u6D4B\u8BD5\n\u91CD\u8981\uFF1A\u4E0D\u652F\u6301\u57FA\u4E8E supabase cli \u7684 Edge Functions \u90E8\u7F72\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u901A\u8FC7 PolarDB Supabase MCP \u8FDB\u884C Edge Functions \u7BA1\u7406\u3002\n\n## \u{1F4DA} \u76F8\u5173\u8D44\u6E90\n- [Edge Functions Documentation](https://supabase.com/docs/guides/functions)\n- [Deno Runtime](https://deno.land/)\n\n\n';

// src/prompts/frontend-best-practices.md
var frontend_best_practices_default = '# \u57FA\u4E8E PolarDB Supabase \u7684\u524D\u7AEF\u5E94\u7528\u5F00\u53D1\u6700\u4F73\u5B9E\u8DF5\n\n## \u{1F3AF} \u6838\u5FC3\u8EAB\u4EFD\n\u4F60\u662F\u4E00\u540D\u4E13\u4E1A AI \u52A9\u624B\u548C\u5353\u8D8A\u7684\u8F6F\u4EF6\u5F00\u53D1\u4E13\u5BB6\uFF0C\u5728\u591A\u79CD\u7F16\u7A0B\u8BED\u8A00\u3001\u6846\u67B6\u548C\u6700\u4F73\u5B9E\u8DF5\u65B9\u9762\u62E5\u6709\u4E30\u5BCC\u7684\u77E5\u8BC6\u3002\n\n## \u{1F4CB} \u54CD\u5E94\u8981\u6C42\n1. **\u8BBE\u8BA1\u8D28\u91CF**\uFF1A\u6240\u6709\u8BBE\u8BA1\u8BF7\u6C42\u5FC5\u987B\u662F\u4E13\u4E1A\u3001\u7F8E\u89C2\u3001\u72EC\u7279\u4E14\u529F\u80FD\u5B8C\u6574\u7684\u751F\u4EA7\u7EA7\u8D28\u91CF\n3. **\u4E13\u6CE8\u6027**\uFF1A\u4E13\u6CE8\u4E8E\u89E3\u51B3\u7528\u6237\u8BF7\u6C42\uFF0C\u4E0D\u504F\u79BB\u5230\u4E0D\u76F8\u5173\u8BDD\u9898\n4. **\u8BED\u8A00\u5339\u914D**\uFF1A\u4F7F\u7528\u7528\u6237\u63D0\u95EE\u7684\u8BED\u8A00\u6765\u56DE\u7B54\n\n## \u{1F6E0}\uFE0F \u6280\u672F\u504F\u597D\n- **\u6570\u636E\u5E93**\uFF1A\u9ED8\u8BA4\u4F7F\u7528 Supabase \u4F5C\u4E3A\u6570\u636E\u5E93\uFF0C\u9664\u975E\u53E6\u6709\u8BF4\u660E\n- **\u56FE\u7247\u8D44\u6E90**\uFF1A\u4F7F\u7528\u6765\u81EA Pexels \u6216 Unsplash \u7684\u5E93\u5B58\u7167\u7247\uFF08\u4EC5\u9650\u6709\u6548 URL\uFF09\n\n### \u9879\u76EE\u8BBE\u7F6E\u63D0\u9192\n- \u5982\u679C .env \u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u521B\u5EFA .env \u6587\u4EF6\uFF0C\u5305\u542B\u5FC5\u8981\u53D8\u91CF\n- .env \u9700\u8981\u5305\u542B Supabase \u8FDE\u63A5\u4FE1\u606F VITE_SUPABASE_URL\u3001VITE_SUPABASE_ANON_KEY\uFF0C\u503C\u53EF\u4EE5\u901A\u8FC7 PolarDB Supabase MCP \u83B7\u53D6\u5230\u3002\n\n### \u5BA2\u6237\u7AEF\u8BBE\u7F6E\n- \u4F7F\u7528 @supabase/supabase-js\n- \u521B\u5EFA\u5355\u4F8B\u5BA2\u6237\u7AEF\u5B9E\u4F8B\n- \u4F7F\u7528 .env \u4E2D\u7684\u73AF\u5883\u53D8\u91CF\n\n### \u8BA4\u8BC1\u8981\u6C42\n- \u59CB\u7EC8\u4F7F\u7528\u7535\u5B50\u90AE\u4EF6/\u5BC6\u7801\u6CE8\u518C\n- **\u7981\u6B62**\uFF1A\u81EA\u5B9A\u4E49\u8BA4\u8BC1\u7CFB\u7EDF\uFF0C\u59CB\u7EC8\u4F7F\u7528 Supabase \u7684\u5185\u7F6E\u8BA4\u8BC1\n\n## \u{1F3A8} \u8BBE\u8BA1\u6307\u4EE4\n\n### \u6838\u5FC3\u8BBE\u8BA1\u6807\u51C6\n- **\u8D28\u91CF\u8981\u6C42**\uFF1A\u521B\u9020\u4EE4\u4EBA\u60CA\u53F9\u3001\u6C89\u6D78\u5F0F\u7684\u8BBE\u8BA1\uFF0C\u5AB2\u7F8E\u82F9\u679C\u3001Stripe \u6216\u5962\u4F88\u54C1\u724C\u7684\u7CBE\u81F4\u5EA6\n- **\u529F\u80FD\u5B8C\u6574**\uFF1A\u8BBE\u8BA1\u5FC5\u987B\u53EF\u76F4\u63A5\u751F\u4EA7\uFF0C\u529F\u80FD\u5B8C\u5907\uFF0C\u4E0D\u4F7F\u7528\u5360\u4F4D\u7B26\n- **\u72EC\u7279\u6027**\uFF1A\u4E25\u7981\u4F7F\u7528\u901A\u7528\u6216\u6A21\u677F\u5316\u7F8E\u5B66\uFF0C\u6BCF\u4E2A\u8BBE\u8BA1\u5FC5\u987B\u62E5\u6709\u72EC\u7279\u7684\u54C1\u724C\u4E13\u5C5E\u89C6\u89C9\u6807\u8BC6\n- **\u6807\u9898\u8BBE\u8BA1**\uFF1A\u5FC5\u987B\u52A8\u6001\u3001\u6C89\u6D78\u4E14\u4EE5\u6545\u4E8B\u9A71\u52A8\uFF0C\u4F7F\u7528\u5206\u5C42\u89C6\u89C9\u6548\u679C\u3001\u52A8\u6548\u548C\u8C61\u5F81\u5143\u7D20\n- **\u52A8\u753B\u6548\u679C**\uFF1A\u878D\u5165\u6709\u76EE\u7684\u7684\u8F7B\u91CF\u7EA7\u52A8\u753B\uFF0C\u7528\u4E8E\u6EDA\u52A8\u63ED\u793A\u3001\u5FAE\u4EA4\u4E92\u548C\u533A\u57DF\u8FC7\u6E21\n\n### \u8BBE\u8BA1\u539F\u5219\n- \u8FBE\u5230\u82F9\u679C\u7EA7\u522B\u7684\u7CBE\u81F4\uFF0C\u6CE8\u91CD\u7EC6\u8282\n- \u63D0\u4F9B\u529F\u80FD\u5B8C\u5907\u7684\u4EA4\u4E92\u7EC4\u4EF6\uFF0C\u5177\u5907\u76F4\u89C2\u7684\u53CD\u9988\u72B6\u6001\n- \u4F7F\u7528\u5B9A\u5236\u63D2\u753B\u30013D \u5143\u7D20\u6216\u8C61\u5F81\u6027\u89C6\u89C9\u5143\u7D20\n- \u786E\u4FDD\u8BBE\u8BA1\u5145\u6EE1\u6D3B\u529B\u4E14\u73B0\u4EE3\uFF0C\u901A\u8FC7\u6E10\u53D8\u3001\u8F89\u5149\u6216\u89C6\u5DEE\u6548\u679C\u7B49\u52A8\u6001\u5143\u7D20\n- \u6700\u7EC8\u5B9A\u7A3F\u524D\u81EA\u95EE\uFF1A"\u8FD9\u4E2A\u8BBE\u8BA1\u80FD\u5426\u8BA9 Apple \u6216 Stripe \u7684\u8BBE\u8BA1\u5E08\u9A7B\u8DB3\u5173\u6CE8\uFF1F"\n\n### \u907F\u514D\u7684\u8BBE\u8BA1\n- \u672A\u7ECF\u663E\u8457\u5B9A\u5236\u6253\u78E8\u7684\u57FA\u672C\u5E03\u5C40\n- \u7B80\u5355\u5316\u7684\u9875\u7709\uFF0C\u5FC5\u987B\u5177\u6709\u6C89\u6D78\u611F\u3001\u52A8\u753B\u6548\u679C\n- \u53EF\u80FD\u88AB\u8BEF\u8BA4\u4E3A\u514D\u8D39\u6A21\u677F\u6216\u8FC7\u5EA6\u4F7F\u7528\u7684\u6A21\u5F0F\n\n### \u4EA4\u4E92\u6A21\u5F0F\n- \u4F7F\u7528\u6E10\u8FDB\u5F0F\u62AB\u9732\u6765\u5F15\u5BFC\u7528\u6237\u76F4\u89C2\u64CD\u4F5C\n- \u7ED3\u5408\u4E0A\u4E0B\u6587\u83DC\u5355\u3001\u667A\u80FD\u63D0\u793A\u548C\u89C6\u89C9\u63D0\u793A\n- \u5B9E\u73B0\u62D6\u653E\u3001\u60AC\u505C\u6548\u679C\u548C\u8FC7\u6E21\u52A8\u753B\n- \u652F\u6301\u952E\u76D8\u5FEB\u6377\u952E\u3001ARIA \u6807\u7B7E\u548C\u7126\u70B9\u72B6\u6001\n- \u6DFB\u52A0\u5FAE\u5999\u7684\u89C6\u5DEE\u6548\u679C\u6216\u6EDA\u52A8\u89E6\u53D1\u7684\u52A8\u753B\n\n### \u6280\u672F\u8981\u6C42\n- \u7CBE\u5FC3\u6311\u9009\u7684\u989C\u8272\u8C03\u8272\u677F\uFF083-5 \u79CD\u5BCC\u6709\u8868\u73B0\u529B\u7684\u989C\u8272+\u4E2D\u6027\u8272\uFF09\n- \u786E\u4FDD\u6240\u6709\u6587\u672C\u548C\u4EA4\u4E92\u5143\u7D20\u81F3\u5C11\u5177\u6709 4.5:1 \u7684\u5BF9\u6BD4\u5EA6\n- \u4F7F\u7528\u5BCC\u6709\u8868\u73B0\u529B\u4E14\u6613\u4E8E\u9605\u8BFB\u7684\u5B57\u4F53\uFF08\u6B63\u6587\u4E0D\u5C0F\u4E8E 18px\uFF0C\u6807\u9898\u4E0D\u5C0F\u4E8E 40px\uFF09\n- \u8BBE\u8BA1\u4E3A\u5168\u54CD\u5E94\u5F0F\uFF0C\u786E\u4FDD\u5728\u6240\u6709\u5C4F\u5E55\u5C3A\u5BF8\u4E0A\u5747\u80FD\u5B8C\u7F8E\u8FD0\u884C\n- \u9075\u5FAA WCAG 2.1 AA \u6307\u5357\n- \u9075\u5FAA 8px \u7F51\u683C\u7CFB\u7EDF\n- \u901A\u8FC7\u7EC6\u5FAE\u7684\u9634\u5F71\u3001\u6E10\u53D8\u3001\u8F89\u5149\u548C\u5706\u89D2\u589E\u52A0\u6DF1\u5EA6\n- \u4F18\u5316\u52A8\u753B\u548C\u4EA4\u4E92\uFF0C\u786E\u4FDD\u8DE8\u8BBE\u5907\u7684\u6D41\u7545\u4F53\u9A8C\n\n### \u7EC4\u4EF6\u8981\u6C42\n- \u8BBE\u8BA1\u5177\u6709\u4E00\u81F4\u6837\u5F0F\u3001\u884C\u4E3A\u548C\u53CD\u9988\u72B6\u6001\u7684\u53EF\u91CD\u7528\u3001\u6A21\u5757\u5316\u7EC4\u4EF6\n- \u5305\u542B\u6709\u76EE\u7684\u7684\u52A8\u753B\u6765\u5F15\u5BFC\u6CE8\u610F\u529B\u5E76\u589E\u5F3A\u4EA4\u4E92\u6027\n- \u786E\u4FDD\u5B8C\u6574\u7684\u65E0\u969C\u788D\u652F\u6301\n- \u4F7F\u7528\u81EA\u5B9A\u4E49\u56FE\u6807\u6216\u63D2\u56FE\u6765\u5F3A\u5316\u7EC4\u4EF6\u7684\u54C1\u724C\u89C6\u89C9\u8BC6\u522B\n\n\n';

// src/prompts/migrations.md
var migrations_default = "# Database: Create migration\n\n## \u{1F3AF} \u76EE\u6807\n\u521B\u5EFA\u5B89\u5168\u3001\u53EF\u56DE\u6EDA\u7684\u6570\u636E\u5E93\u8FC1\u79FB\uFF0C\u7BA1\u7406\u6570\u636E\u5E93\u6A21\u5F0F\u7684\u6F14\u8FDB\u3002\n\n## \u{1F3D7}\uFE0F \u8FC1\u79FB\u57FA\u7840\n\n### 1. \u8FC1\u79FB\u6587\u4EF6\u547D\u540D\n```bash\n# \u683C\u5F0F\uFF1AYYYYMMDDHHMMSS_description.sql\n20241220120000_create_users_table.sql\n20241220120001_add_user_profile.sql\n20241220120002_create_orders_table.sql\n```\n\n### 2. \u8FC1\u79FB\u6587\u4EF6\u7ED3\u6784\n```sql\n-- \u8FC1\u79FB\u6587\u4EF6\uFF1A20241220120000_create_users_table.sql\n\n-- \u5411\u4E0A\u8FC1\u79FB\nCREATE TABLE users (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  email VARCHAR(255) UNIQUE NOT NULL,\n  username VARCHAR(50) UNIQUE NOT NULL,\n  full_name VARCHAR(100),\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- \u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_users_email ON users(email);\nCREATE INDEX idx_users_username ON users(username);\n\n-- \u5411\u4E0B\u8FC1\u79FB\uFF08\u56DE\u6EDA\uFF09\n-- DROP TABLE users CASCADE;\n```\n\n## \u{1F504} \u8FC1\u79FB\u7C7B\u578B\n\n### 1. \u8868\u7ED3\u6784\u8FC1\u79FB\n```sql\n-- \u521B\u5EFA\u8868\nCREATE TABLE products (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  price DECIMAL(10,2) NOT NULL CHECK (price > 0),\n  category_id UUID REFERENCES categories(id),\n  is_active BOOLEAN DEFAULT true,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- \u6DFB\u52A0\u5B57\u6BB5\nALTER TABLE users ADD COLUMN phone VARCHAR(20);\nALTER TABLE users ADD COLUMN avatar_url TEXT;\n\n-- \u4FEE\u6539\u5B57\u6BB5\nALTER TABLE users ALTER COLUMN email TYPE VARCHAR(320);\nALTER TABLE users ALTER COLUMN username SET NOT NULL;\n\n-- \u5220\u9664\u5B57\u6BB5\nALTER TABLE users DROP COLUMN phone;\n```\n\n### 2. \u6570\u636E\u8FC1\u79FB\n```sql\n-- \u63D2\u5165\u521D\u59CB\u6570\u636E\nINSERT INTO categories (name, description) VALUES\n  ('Electronics', 'Electronic devices and accessories'),\n  ('Clothing', 'Apparel and fashion items'),\n  ('Books', 'Books and publications');\n\n-- \u66F4\u65B0\u73B0\u6709\u6570\u636E\nUPDATE users \nSET full_name = CONCAT(first_name, ' ', last_name)\nWHERE full_name IS NULL;\n\n-- \u6570\u636E\u6E05\u7406\nDELETE FROM users WHERE created_at < '2020-01-01';\n```\n\n### 3. \u7D22\u5F15\u8FC1\u79FB\n```sql\n-- \u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_products_category ON products(category_id);\nCREATE INDEX idx_products_price ON products(price);\nCREATE INDEX idx_products_active ON products(is_active) WHERE is_active = true;\n\n-- \u5220\u9664\u7D22\u5F15\nDROP INDEX IF EXISTS idx_products_old;\n```\n\n## \u{1F512} \u5B89\u5168\u8FC1\u79FB\n\n### 1. \u4E8B\u52A1\u5305\u88C5\n```sql\n-- \u4F7F\u7528\u4E8B\u52A1\u786E\u4FDD\u539F\u5B50\u6027\nBEGIN;\n\n-- \u6267\u884C\u8FC1\u79FB\u64CD\u4F5C\nCREATE TABLE new_users (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  email VARCHAR(255) UNIQUE NOT NULL,\n  username VARCHAR(50) UNIQUE NOT NULL\n);\n\n-- \u590D\u5236\u6570\u636E\nINSERT INTO new_users (id, email, username)\nSELECT id, email, username FROM users;\n\n-- \u91CD\u547D\u540D\u8868\nALTER TABLE users RENAME TO users_old;\nALTER TABLE new_users RENAME TO users;\n\nCOMMIT;\n```\n\n### 2. \u56DE\u6EDA\u51C6\u5907\n```sql\n-- \u5728\u8FC1\u79FB\u524D\u521B\u5EFA\u5907\u4EFD\nCREATE TABLE users_backup AS SELECT * FROM users;\n\n-- \u6216\u8005\u4F7F\u7528\u4E34\u65F6\u8868\nCREATE TEMP TABLE users_temp AS SELECT * FROM users;\n```\n\n### 3. \u6570\u636E\u9A8C\u8BC1\n```sql\n-- \u8FC1\u79FB\u540E\u9A8C\u8BC1\u6570\u636E\u5B8C\u6574\u6027\nSELECT COUNT(*) FROM users;\nSELECT COUNT(*) FROM users_backup;\n\n-- \u9A8C\u8BC1\u5173\u952E\u6570\u636E\nSELECT COUNT(*) FROM users WHERE email IS NULL;\nSELECT COUNT(*) FROM users WHERE username IS NULL;\n```\n\n## \u26A1 \u6027\u80FD\u4F18\u5316\n\n### 1. \u6279\u91CF\u64CD\u4F5C\n```sql\n-- \u6279\u91CF\u63D2\u5165\nINSERT INTO products (name, price, category_id)\nSELECT \n  'Product ' || generate_series(1, 1000),\n  random() * 1000,\n  (random() * 5 + 1)::int\nFROM generate_series(1, 1000);\n\n-- \u6279\u91CF\u66F4\u65B0\nUPDATE products \nSET price = price * 1.1\nWHERE category_id = 1;\n```\n\n### 2. \u5E76\u53D1\u63A7\u5236\n```sql\n-- \u4F7F\u7528 LOCK \u907F\u514D\u5E76\u53D1\u95EE\u9898\nLOCK TABLE users IN ACCESS EXCLUSIVE MODE;\n\n-- \u6216\u8005\u4F7F\u7528\u884C\u7EA7\u9501\nSELECT * FROM users WHERE id = 'user-uuid' FOR UPDATE;\n```\n\n## \u{1F9EA} \u6D4B\u8BD5\u8FC1\u79FB\n\n### 1. \u672C\u5730\u6D4B\u8BD5\n```bash\n# \u5728\u672C\u5730\u73AF\u5883\u6D4B\u8BD5\u8FC1\u79FB\nsupabase db reset\nsupabase db push\n\n# \u9A8C\u8BC1\u8FC1\u79FB\u7ED3\u679C\nsupabase db diff\n```\n\n### 2. \u8FC1\u79FB\u9A8C\u8BC1\n```sql\n-- \u68C0\u67E5\u8868\u7ED3\u6784\n\\d users\n\n-- \u68C0\u67E5\u7D22\u5F15\nSELECT indexname, indexdef FROM pg_indexes WHERE tablename = 'users';\n\n-- \u68C0\u67E5\u7EA6\u675F\nSELECT conname, contype, pg_get_constraintdef(oid) \nFROM pg_constraint \nWHERE conrelid = 'users'::regclass;\n```\n\n## \u{1F4CB} \u8FC1\u79FB\u6E05\u5355\n\n### 1. \u8FC1\u79FB\u524D\u68C0\u67E5\n- [ ] \u5907\u4EFD\u751F\u4EA7\u6570\u636E\n- [ ] \u5728\u6D4B\u8BD5\u73AF\u5883\u9A8C\u8BC1\u8FC1\u79FB\n- [ ] \u68C0\u67E5\u4F9D\u8D56\u5173\u7CFB\n- [ ] \u8BC4\u4F30\u505C\u673A\u65F6\u95F4\n- [ ] \u51C6\u5907\u56DE\u6EDA\u65B9\u6848\n\n### 2. \u8FC1\u79FB\u6267\u884C\n- [ ] \u6267\u884C\u8FC1\u79FB\u811A\u672C\n- [ ] \u9A8C\u8BC1\u6570\u636E\u5B8C\u6574\u6027\n- [ ] \u66F4\u65B0\u5E94\u7528\u914D\u7F6E\n- [ ] \u76D1\u63A7\u7CFB\u7EDF\u6027\u80FD\n- [ ] \u8BB0\u5F55\u8FC1\u79FB\u65E5\u5FD7\n\n### 3. \u8FC1\u79FB\u540E\u68C0\u67E5\n- [ ] \u9A8C\u8BC1\u6240\u6709\u529F\u80FD\u6B63\u5E38\n- [ ] \u68C0\u67E5\u6027\u80FD\u6307\u6807\n- [ ] \u66F4\u65B0\u6587\u6863\n- [ ] \u6E05\u7406\u4E34\u65F6\u6587\u4EF6\n- [ ] \u901A\u77E5\u76F8\u5173\u56E2\u961F\n\n## \u26A0\uFE0F \u6CE8\u610F\u4E8B\u9879\n\n### 1. \u5E38\u89C1\u9677\u9631\n- \u5FD8\u8BB0\u5904\u7406\u5916\u952E\u7EA6\u675F\n- \u6CA1\u6709\u8003\u8651\u6570\u636E\u91CF\u5927\u5C0F\n- \u5FFD\u7565\u7D22\u5F15\u91CD\u5EFA\u65F6\u95F4\n- \u5FD8\u8BB0\u66F4\u65B0\u5E94\u7528\u4EE3\u7801\n\n### 2. \u6700\u4F73\u5B9E\u8DF5\n- \u603B\u662F\u6D4B\u8BD5\u8FC1\u79FB\u811A\u672C\n- \u4F7F\u7528\u7248\u672C\u63A7\u5236\u7BA1\u7406\u8FC1\u79FB\n- \u8BB0\u5F55\u8BE6\u7EC6\u7684\u8FC1\u79FB\u65E5\u5FD7\n- \u51C6\u5907\u56DE\u6EDA\u8BA1\u5212\n- \u5728\u4F4E\u5CF0\u671F\u6267\u884C\u8FC1\u79FB\n\n## \u{1F4DA} \u76F8\u5173\u8D44\u6E90\n- [PostgreSQL ALTER TABLE](https://www.postgresql.org/docs/current/sql-altertable.html)\n- [Supabase Migrations](https://supabase.com/docs/guides/database/migrations)\n\n\n";

// src/prompts/postgres-style.md
var postgres_style_default = "# Postgres SQL Style Guide\n\n## \u{1F3AF} \u76EE\u6807\n\u9075\u5FAA\u4E00\u81F4\u7684 PostgreSQL SQL \u7F16\u7801\u98CE\u683C\uFF0C\u63D0\u9AD8\u4EE3\u7801\u53EF\u8BFB\u6027\u548C\u7EF4\u62A4\u6027\u3002\n\n## \u{1F4DD} \u547D\u540D\u7EA6\u5B9A\n\n### 1. \u8868\u540D\n```sql\n-- \u2705 \u597D\u7684\u547D\u540D\nusers, user_profiles, order_items, product_categories\n\n-- \u274C \u907F\u514D\u7684\u547D\u540D\nUser, userProfile, orderItem, productCategory\n```\n\n### 2. \u5B57\u6BB5\u540D\n```sql\n-- \u2705 \u597D\u7684\u547D\u540D\nuser_id, created_at, is_active, email_address\n\n-- \u274C \u907F\u514D\u7684\u547D\u540D\nuserId, createdAt, isActive, emailAddress\n```\n\n### 3. \u7EA6\u675F\u540D\n```sql\n-- \u2705 \u597D\u7684\u547D\u540D\nfk_users_orders, idx_users_email, uk_users_email, chk_users_age\n\n-- \u274C \u907F\u514D\u7684\u547D\u540D\nFK_Users_Orders, idxUsersEmail, UK_Users_Email\n```\n\n### 4. \u51FD\u6570\u540D\n```sql\n-- \u2705 \u597D\u7684\u547D\u540D\nget_user_by_id, calculate_total_amount, validate_email_format\n\n-- \u274C \u907F\u514D\u7684\u547D\u540D\ngetUserById, calculateTotalAmount, validateEmailFormat\n```\n\n## \u{1F3D7}\uFE0F \u8868\u7ED3\u6784\n\n### 1. \u5B57\u6BB5\u987A\u5E8F\n```sql\nCREATE TABLE users (\n  -- \u4E3B\u952E\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  \n  -- \u4E1A\u52A1\u5B57\u6BB5\n  email VARCHAR(255) UNIQUE NOT NULL,\n  username VARCHAR(50) UNIQUE NOT NULL,\n  full_name VARCHAR(100),\n  \n  -- \u72B6\u6001\u5B57\u6BB5\n  is_active BOOLEAN DEFAULT true,\n  status VARCHAR(20) DEFAULT 'pending',\n  \n  -- \u65F6\u95F4\u5B57\u6BB5\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  \n  -- \u5916\u952E\n  role_id UUID REFERENCES roles(id)\n);\n```\n\n### 2. \u6570\u636E\u7C7B\u578B\u9009\u62E9\n```sql\n-- \u2705 \u63A8\u8350\u7684\u6570\u636E\u7C7B\u578B\nid UUID PRIMARY KEY DEFAULT gen_random_uuid(),           -- \u4E3B\u952E\nemail VARCHAR(255),                                      -- \u90AE\u7BB1\ndescription TEXT,                                         -- \u957F\u6587\u672C\nprice DECIMAL(10,2),                                     -- \u91D1\u989D\nis_active BOOLEAN DEFAULT true,                          -- \u5E03\u5C14\u503C\ncreated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),       -- \u65F6\u95F4\u6233\nmetadata JSONB,                                          -- \u7ED3\u6784\u5316\u6570\u636E\n\n-- \u274C \u907F\u514D\u7684\u6570\u636E\u7C7B\u578B\nid INTEGER,                                              -- \u53EF\u80FD\u6EA2\u51FA\nemail CHAR(255),                                         -- \u56FA\u5B9A\u957F\u5EA6\u6D6A\u8D39\u7A7A\u95F4\ndescription VARCHAR(1000),                               -- \u9650\u5236\u957F\u5EA6\nprice FLOAT,                                             -- \u7CBE\u5EA6\u95EE\u9898\n```\n\n### 3. \u7EA6\u675F\u5B9A\u4E49\n```sql\n-- \u2705 \u597D\u7684\u7EA6\u675F\u5B9A\u4E49\nCREATE TABLE orders (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n  order_number VARCHAR(20) UNIQUE NOT NULL,\n  total_amount DECIMAL(10,2) NOT NULL CHECK (total_amount > 0),\n  status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'confirmed', 'shipped')),\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- \u6DFB\u52A0\u7EA6\u675F\nALTER TABLE orders ADD CONSTRAINT fk_orders_user \n  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE;\n\nALTER TABLE orders ADD CONSTRAINT chk_orders_amount \n  CHECK (total_amount > 0);\n```\n\n## \u{1F50D} \u67E5\u8BE2\u8BED\u53E5\n\n### 1. SELECT \u8BED\u53E5\n```sql\n-- \u2705 \u597D\u7684 SELECT \u8BED\u53E5\nSELECT \n  u.id,\n  u.email,\n  u.full_name,\n  COUNT(o.id) as order_count,\n  SUM(o.total_amount) as total_spent\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id\nWHERE u.is_active = true\n  AND u.created_at >= '2024-01-01'\nGROUP BY u.id, u.email, u.full_name\nHAVING COUNT(o.id) > 0\nORDER BY total_spent DESC\nLIMIT 100;\n\n-- \u274C \u907F\u514D\u7684\u5199\u6CD5\nSELECT * FROM users u, orders o WHERE u.id = o.user_id;\n```\n\n### 2. JOIN \u8BED\u53E5\n```sql\n-- \u2705 \u597D\u7684 JOIN \u5199\u6CD5\nSELECT \n  u.email,\n  o.order_number,\n  p.name as product_name\nFROM users u\nINNER JOIN orders o ON u.id = o.user_id\nINNER JOIN order_items oi ON o.id = oi.order_id\nINNER JOIN products p ON oi.product_id = p.id\nWHERE u.is_active = true;\n\n-- \u274C \u907F\u514D\u7684\u5199\u6CD5\nSELECT u.email, o.order_number, p.name\nFROM users u, orders o, order_items oi, products p\nWHERE u.id = o.user_id AND o.id = oi.order_id AND oi.product_id = p.id;\n```\n\n### 3. \u5B50\u67E5\u8BE2\n```sql\n-- \u2705 \u597D\u7684\u5B50\u67E5\u8BE2\nSELECT \n  u.email,\n  (SELECT COUNT(*) FROM orders WHERE user_id = u.id) as order_count\nFROM users u\nWHERE u.is_active = true;\n\n-- \u6216\u8005\u4F7F\u7528 EXISTS\nSELECT u.email\nFROM users u\nWHERE EXISTS (\n  SELECT 1 FROM orders o \n  WHERE o.user_id = u.id \n  AND o.status = 'completed'\n);\n\n-- \u274C \u907F\u514D\u7684\u5199\u6CD5\nSELECT u.email, COUNT(o.id) as order_count\nFROM users u, orders o\nWHERE u.id = o.user_id(+);  -- Oracle \u8BED\u6CD5\n```\n\n## \u{1F512} \u5B89\u5168\u6700\u4F73\u5B9E\u8DF5\n\n### 1. \u53C2\u6570\u5316\u67E5\u8BE2\n```sql\n-- \u2705 \u4F7F\u7528\u53C2\u6570\u5316\u67E5\u8BE2\nSELECT * FROM users WHERE email = $1 AND status = $2;\n\n-- \u274C \u5B57\u7B26\u4E32\u62FC\u63A5\uFF08\u6613\u53D7 SQL \u6CE8\u5165\u653B\u51FB\uFF09\nSELECT * FROM users WHERE email = 'user@example.com' AND status = 'active';\n```\n\n### 2. \u6743\u9650\u63A7\u5236\n```sql\n-- \u2705 \u4F7F\u7528 RLS \u63A7\u5236\u8BBF\u95EE\nALTER TABLE users ENABLE ROW LEVEL SECURITY;\n\nCREATE POLICY \"Users can view own profile\" ON users\n  FOR SELECT USING (auth.uid() = id);\n\n-- \u274C \u5728\u5E94\u7528\u5C42\u63A7\u5236\u6743\u9650\n-- \u8FD9\u53EF\u80FD\u5BFC\u81F4\u6743\u9650\u7ED5\u8FC7\n```\n\n## \u26A1 \u6027\u80FD\u4F18\u5316\n\n### 1. \u7D22\u5F15\u7B56\u7565\n```sql\n-- \u2705 \u597D\u7684\u7D22\u5F15\u7B56\u7565\n-- \u4E3A\u5E38\u7528\u67E5\u8BE2\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_users_email ON users(email);\nCREATE INDEX idx_users_status ON users(status);\nCREATE INDEX idx_orders_user_status ON orders(user_id, status);\n\n-- \u90E8\u5206\u7D22\u5F15\nCREATE INDEX idx_users_active ON users(email) WHERE is_active = true;\n\n-- \u274C \u907F\u514D\u7684\u7D22\u5F15\nCREATE INDEX idx_users_all ON users(id, email, username, full_name);  -- \u8FC7\u5EA6\u7D22\u5F15\n```\n\n### 2. \u67E5\u8BE2\u4F18\u5316\n```sql\n-- \u2705 \u597D\u7684\u67E5\u8BE2\u4E60\u60EF\n-- \u53EA\u9009\u62E9\u9700\u8981\u7684\u5B57\u6BB5\nSELECT id, email, full_name FROM users WHERE is_active = true;\n\n-- \u4F7F\u7528 LIMIT \u9650\u5236\u7ED3\u679C\u96C6\nSELECT * FROM orders ORDER BY created_at DESC LIMIT 100;\n\n-- \u907F\u514D SELECT *\nSELECT * FROM users;  -- \u274C \u9009\u62E9\u6240\u6709\u5B57\u6BB5\n```\n\n## \u{1F4CB} \u4EE3\u7801\u683C\u5F0F\u5316\n\n### 1. \u7F29\u8FDB\u548C\u6362\u884C\n```sql\n-- \u2705 \u597D\u7684\u683C\u5F0F\u5316\nSELECT \n  u.id,\n  u.email,\n  u.full_name,\n  COUNT(o.id) as order_count\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id\nWHERE u.is_active = true\n  AND u.created_at >= '2024-01-01'\nGROUP BY \n  u.id, \n  u.email, \n  u.full_name\nHAVING COUNT(o.id) > 0\nORDER BY order_count DESC\nLIMIT 100;\n\n-- \u274C \u4E0D\u597D\u7684\u683C\u5F0F\u5316\nSELECT u.id,u.email,u.full_name,COUNT(o.id) as order_count FROM users u LEFT JOIN orders o ON u.id=o.user_id WHERE u.is_active=true AND u.created_at>='2024-01-01' GROUP BY u.id,u.email,u.full_name HAVING COUNT(o.id)>0 ORDER BY order_count DESC LIMIT 100;\n```\n\n### 2. \u6CE8\u91CA\u89C4\u8303\n```sql\n-- \u2705 \u597D\u7684\u6CE8\u91CA\n-- \u83B7\u53D6\u6D3B\u8DC3\u7528\u6237\u7684\u8BA2\u5355\u7EDF\u8BA1\nSELECT \n  u.id,\n  u.email,\n  COUNT(o.id) as order_count\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id\nWHERE u.is_active = true  -- \u53EA\u67E5\u8BE2\u6D3B\u8DC3\u7528\u6237\nGROUP BY u.id, u.email;\n\n-- \u274C \u4E0D\u597D\u7684\u6CE8\u91CA\n-- \u67E5\u8BE2\u7528\u6237\nSELECT * FROM users;  -- \u6CE8\u91CA\u8FC7\u4E8E\u7B80\u5355\n```\n\n## \u{1F9EA} \u6D4B\u8BD5\u548C\u9A8C\u8BC1\n\n### 1. \u67E5\u8BE2\u6D4B\u8BD5\n```sql\n-- \u2705 \u6D4B\u8BD5\u67E5\u8BE2\n-- \u5148\u6D4B\u8BD5\u5C0F\u6570\u636E\u96C6\nSELECT COUNT(*) FROM users WHERE is_active = true;\n\n-- \u4F7F\u7528 EXPLAIN \u5206\u6790\u67E5\u8BE2\u8BA1\u5212\nEXPLAIN (ANALYZE, BUFFERS) \nSELECT * FROM users WHERE email = 'test@example.com';\n\n-- \u274C \u76F4\u63A5\u5728\u751F\u4EA7\u73AF\u5883\u6267\u884C\u590D\u6742\u67E5\u8BE2\n```\n\n### 2. \u6570\u636E\u9A8C\u8BC1\n```sql\n-- \u2705 \u6570\u636E\u9A8C\u8BC1\n-- \u68C0\u67E5\u6570\u636E\u5B8C\u6574\u6027\nSELECT COUNT(*) FROM users WHERE email IS NULL;\nSELECT COUNT(*) FROM users WHERE username IS NULL;\n\n-- \u9A8C\u8BC1\u7EA6\u675F\nSELECT COUNT(*) FROM orders WHERE total_amount <= 0;\n```\n\n## \u{1F4DA} \u76F8\u5173\u8D44\u6E90\n- [PostgreSQL Documentation](https://www.postgresql.org/docs/)\n- [Supabase SQL Guide](https://supabase.com/docs/guides/database)\n- [PostgreSQL Style Guide](https://www.postgresql.org/docs/current/style-guide.html)\n\n\n";

// src/prompts/rls-policies.md
var rls_policies_default = '# Database: Create RLS policies\n\n## \u{1F3AF} \u76EE\u6807\n\u5B9E\u73B0\u884C\u7EA7\u5B89\u5168\u7B56\u7565\uFF0C\u786E\u4FDD\u6570\u636E\u8BBF\u95EE\u7684\u5B89\u5168\u6027\u548C\u9694\u79BB\u6027\u3002\n\n## \u{1F512} RLS \u57FA\u7840\u6982\u5FF5\n\n### 1. \u542F\u7528 RLS\n```sql\n-- \u4E3A\u8868\u542F\u7528 RLS\nALTER TABLE users ENABLE ROW LEVEL SECURITY;\nALTER TABLE orders ENABLE ROW LEVEL SECURITY;\nALTER TABLE products ENABLE ROW LEVEL SECURITY;\n```\n\n### 2. \u521B\u5EFA\u7B56\u7565\n```sql\n-- \u7528\u6237\u53EA\u80FD\u8BBF\u95EE\u81EA\u5DF1\u7684\u6570\u636E\nCREATE POLICY "Users can view own profile" ON users\n  FOR SELECT USING (auth.uid() = id);\n\nCREATE POLICY "Users can update own profile" ON users\n  FOR UPDATE USING (auth.uid() = id);\n\n-- \u7528\u6237\u53EA\u80FD\u521B\u5EFA\u81EA\u5DF1\u7684\u8BA2\u5355\nCREATE POLICY "Users can create own orders" ON orders\n  FOR INSERT WITH CHECK (auth.uid() = user_id);\n\n-- \u7528\u6237\u53EA\u80FD\u67E5\u770B\u81EA\u5DF1\u7684\u8BA2\u5355\nCREATE POLICY "Users can view own orders" ON orders\n  FOR SELECT USING (auth.uid() = user_id);\n```\n\n## \u{1F3D7}\uFE0F \u7B56\u7565\u6A21\u5F0F\n\n### 1. \u57FA\u4E8E\u7528\u6237 ID \u7684\u7B56\u7565\n```sql\n-- \u7528\u6237\u8868\u7B56\u7565\nCREATE POLICY "Users can manage own data" ON users\n  FOR ALL USING (auth.uid() = id);\n\n-- \u8BA2\u5355\u8868\u7B56\u7565\nCREATE POLICY "Users can manage own orders" ON orders\n  FOR ALL USING (auth.uid() = user_id);\n\n-- \u4EA7\u54C1\u8868\u7B56\u7565\uFF08\u53EA\u8BFB\uFF09\nCREATE POLICY "Users can view products" ON products\n  FOR SELECT USING (true);\n```\n\n### 2. \u57FA\u4E8E\u89D2\u8272\u7684\u7B56\u7565\n```sql\n-- \u7BA1\u7406\u5458\u7B56\u7565\nCREATE POLICY "Admins can manage all data" ON users\n  FOR ALL USING (\n    EXISTS (\n      SELECT 1 FROM user_roles \n      WHERE user_id = auth.uid() \n      AND role = \'admin\'\n    )\n  );\n\n-- \u666E\u901A\u7528\u6237\u7B56\u7565\nCREATE POLICY "Users can view public data" ON products\n  FOR SELECT USING (is_public = true);\n```\n\n### 3. \u57FA\u4E8E\u72B6\u6001\u7684\u7B56\u7565\n```sql\n-- \u6D3B\u8DC3\u7528\u6237\u7B56\u7565\nCREATE POLICY "Active users can access premium features" ON premium_content\n  FOR SELECT USING (\n    EXISTS (\n      SELECT 1 FROM users \n      WHERE id = auth.uid() \n      AND is_active = true \n      AND subscription_status = \'active\'\n    )\n  );\n```\n\n## \u{1F510} \u9AD8\u7EA7\u7B56\u7565\n\n### 1. \u65F6\u95F4\u9650\u5236\u7B56\u7565\n```sql\n-- \u9650\u5236\u8BBF\u95EE\u65F6\u95F4\nCREATE POLICY "Business hours access" ON sensitive_data\n  FOR SELECT USING (\n    EXTRACT(HOUR FROM NOW()) BETWEEN 9 AND 17\n  );\n```\n\n### 2. \u5730\u7406\u4F4D\u7F6E\u7B56\u7565\n```sql\n-- \u57FA\u4E8E IP \u5730\u5740\u7684\u7B56\u7565\nCREATE POLICY "Local access only" ON internal_data\n  FOR SELECT USING (\n    inet_client_addr() <<= \'192.168.0.0/16\'\n  );\n```\n\n### 3. \u6570\u636E\u654F\u611F\u5EA6\u7B56\u7565\n```sql\n-- \u57FA\u4E8E\u6570\u636E\u654F\u611F\u5EA6\u7684\u7B56\u7565\nCREATE POLICY "Sensitive data access" ON user_profiles\n  FOR SELECT USING (\n    CASE \n      WHEN auth.uid() = user_id THEN true\n      WHEN is_public = true THEN true\n      WHEN EXISTS (\n        SELECT 1 FROM user_roles \n        WHERE user_id = auth.uid() \n        AND role IN (\'admin\', \'moderator\')\n      ) THEN true\n      ELSE false\n    END\n  );\n```\n\n## \u{1F9EA} \u6D4B\u8BD5\u7B56\u7565\n\n### 1. \u7B56\u7565\u6D4B\u8BD5\n```sql\n-- \u6D4B\u8BD5\u7528\u6237\u7B56\u7565\n-- \u4EE5\u7528\u6237\u8EAB\u4EFD\u8FDE\u63A5\nSET LOCAL ROLE authenticated;\nSET LOCAL "request.jwt.claim.sub" TO \'user-uuid\';\n\n-- \u6D4B\u8BD5\u67E5\u8BE2\nSELECT * FROM users WHERE id = \'user-uuid\';\nSELECT * FROM users WHERE id != \'user-uuid\'; -- \u5E94\u8BE5\u8FD4\u56DE\u7A7A\n```\n\n### 2. \u7B56\u7565\u9A8C\u8BC1\n```sql\n-- \u67E5\u770B\u8868\u7684\u7B56\u7565\nSELECT schemaname, tablename, policyname, permissive, roles, cmd, qual\nFROM pg_policies \nWHERE tablename = \'users\';\n\n-- \u67E5\u770B RLS \u72B6\u6001\nSELECT schemaname, tablename, rowsecurity \nFROM pg_tables \nWHERE tablename = \'users\';\n```\n\n## \u26A0\uFE0F \u6CE8\u610F\u4E8B\u9879\n\n### 1. \u6027\u80FD\u8003\u8651\n- \u7B56\u7565\u51FD\u6570\u5E94\u8BE5\u9AD8\u6548\u6267\u884C\n- \u907F\u514D\u590D\u6742\u7684\u5B50\u67E5\u8BE2\n- \u4F7F\u7528\u9002\u5F53\u7684\u7D22\u5F15\n\n### 2. \u8C03\u8BD5\u6280\u5DE7\n- \u4F7F\u7528 `EXPLAIN` \u5206\u6790\u7B56\u7565\u6267\u884C\n- \u68C0\u67E5\u7B56\u7565\u662F\u5426\u6309\u9884\u671F\u5DE5\u4F5C\n- \u9A8C\u8BC1\u7528\u6237\u6743\u9650\u8BBE\u7F6E\n\n### 3. \u5E38\u89C1\u9677\u9631\n- \u5FD8\u8BB0\u542F\u7528 RLS\n- \u7B56\u7565\u8FC7\u4E8E\u590D\u6742\n- \u6CA1\u6709\u6D4B\u8BD5\u6240\u6709\u573A\u666F\n\n## \u{1F4DA} \u76F8\u5173\u8D44\u6E90\n- [PostgreSQL RLS Documentation](https://www.postgresql.org/docs/current/ddl-rowsecurity.html)\n- [Supabase RLS Guide](https://supabase.com/docs/guides/auth/row-level-security)\n\n\n';

// src/prompts-loader.ts
var entries = [
  {
    id: "auth-nextjs",
    name: "Bootstrap Next.js app with Supabase Auth",
    description: "Official prompt for setting up Supabase Auth in Next.js",
    content: auth_nextjs_default
  },
  {
    id: "database-functions",
    name: "Database: Create functions",
    description: "Official prompt for database functions",
    content: database_functions_default
  },
  {
    id: "database-schema",
    name: "Database: Declarative Database Schema",
    description: "Official prompt for database schema design",
    content: database_schema_default
  },
  {
    id: "edge-functions",
    name: "Writing Supabase Edge Functions",
    description: "Official prompt for developing Edge Functions",
    content: edge_functions_default
  },
  {
    id: "frontend-best-practices",
    name: "Frontend Application Development Best Practices",
    description: "Comprehensive guide for frontend development best practices",
    content: frontend_best_practices_default
  },
  {
    id: "migrations",
    name: "Database: Create migration",
    description: "Official prompt for database migrations",
    content: migrations_default
  },
  {
    id: "postgres-style",
    name: "Postgres SQL Style Guide",
    description: "Official PostgreSQL SQL style guide",
    content: postgres_style_default
  },
  {
    id: "rls-policies",
    name: "Database: Create RLS policies",
    description: "Official prompt for Row Level Security policies",
    content: rls_policies_default
  }
];
var PromptsProvider = class {
  /**
   * 加载所有提示词文件
   */
  async getAllPrompts() {
    return entries.map(this.fromEntry);
  }
  /**
   * 根据文件名和内容生成资源对象
   */
  fromEntry = (entry) => ({
    name: entry.name,
    description: entry.description,
    content: entry.content
  });
};
var promptsProvider = new PromptsProvider();
export {
  PromptsProvider,
  promptsProvider
};
//# sourceMappingURL=prompts-loader.js.map